*   Copyright (c) 2015 NuWave Technologies, Inc. All rights reserved. (www.nuwavetech.com)
  
?COMMENTS

Constant REQUEST-GET-VOLUMES         value 1.
Constant REQUEST-GET-SUBVOLS         value 2.
Constant REQUEST-GET-FILES           value 3.
Constant REQUEST-GET-FILE-INFO       value 4.
Constant REQUEST-GET-SYSTEM-INFO     value 5.
Constant REQUEST-GET-CPU-LIST        value 6.

Constant REQUEST-GET-CPU-INFO        value 16.
Constant REQUEST-GET-CPU-BUSY        value 17.

Constant RESULT-SUCCESS              value 0.
Constant RESULT-ACCESS-DENIED        value 2.
Constant RESULT-INVALID-REQUEST      value 8995.

Constant MAX-ITEMS                   value 1024.
Constant MAX-ALT-KEYS                value 100.

DEF REQUEST-CODE    PIC 9(4) COMP.
DEF RESULT-CODE     PIC 9(4) COMP. 
DEF ITEM-NAME       PIC X(16).
DEF INT16           PIC S9(4) COMP.
DEF INT32           PIC S9(8) COMP.
DEF UINT16          PIC 9(4) COMP.
DEF UINT32          PIC 9(8) COMP.
DEF INT64           PIC S9(16) COMP.
DEF ITEM-COUNT      PIC 9(4) COMP.

DEF GET-VOLUMES.
  02 REQUEST-CODE   TYPE * VALUE REQUEST-GET-VOLUMES.
  02 NODE           TYPE ITEM-NAME.
END.

DEF GET-VOLUMES-RESULT.
  02 RESULT-CODE    TYPE *.
  02 NODE           TYPE ITEM-NAME.
  02 ITEM-COUNT     TYPE *.
  02 VOLUMES        TYPE ITEM-NAME OCCURS 0 TO MAX-ITEMS TIMES DEPENDING ON ITEM-COUNT.
END.

DEF GET-SUBVOLS.
  02 REQUEST-CODE   TYPE * VALUE REQUEST-GET-SUBVOLS.
  02 NODE           TYPE ITEM-NAME.
  02 VOLUME         TYPE ITEM-NAME.
END.

DEF GET-SUBVOLS-RESULT.
  02 RESULT-CODE    TYPE *.
  02 NODE           TYPE ITEM-NAME.
  02 VOLUME         TYPE ITEM-NAME.
  02 ITEM-COUNT     TYPE *.
  02 SUBVOLS        TYPE ITEM-NAME OCCURS 0 TO MAX-ITEMS TIMES DEPENDING ON ITEM-COUNT.
END.

DEF GET-FILES.
  02 REQUEST-CODE   TYPE * VALUE REQUEST-GET-FILES.
  02 NODE           TYPE ITEM-NAME.
  02 VOLUME         TYPE ITEM-NAME.
  02 SUBVOL         TYPE ITEM-NAME.
END.

DEF GET-FILES-RESULT.
  02 RESULT-CODE    TYPE *.
  02 NODE           TYPE ITEM-NAME.
  02 VOLUME         TYPE ITEM-NAME.
  02 SUBVOL         TYPE ITEM-NAME.
  02 ITEM-COUNT     PIC S9(4) COMP.
  02 FILES          TYPE ITEM-NAME OCCURS 0 TO MAX-ITEMS TIMES DEPENDING ON ITEM-COUNT.
END.

DEF GET-FILE-INFO.
  02 REQUEST-CODE   TYPE * VALUE REQUEST-GET-FILE-INFO.
  02 NODE           TYPE ITEM-NAME.
  02 VOLUME         TYPE ITEM-NAME.
  02 SUBVOL         TYPE ITEM-NAME.
  02 FILENAME       TYPE ITEM-NAME.
END.

DEF ALT-KEY.
  02 KEY-SPECIFIER          PIC X(2).
  02 KEY-LEN                TYPE UINT16.
  02 KEY-OFFSET             TYPE UINT32.
  02 KEY-FILENUM            TYPE UINT16.
  02 NULL-VALUE             TYPE UINT16.
  02 ATTRIBUTES             TYPE UINT16.
END.

DEF FILE-INFO.
  02  EOF                   TYPE INT64.
  02  CREATION-TIME         TYPE INT64.
  02  MODIFICATION-TIME     TYPE INT64.
  02  OPEN-TIME             TYPE INT64.
  02  BLOCK-LENGTH          TYPE UINT32.
  02  PRI-EXT               TYPE UINT32.
  02  SEC-EXT               TYPE UINT32.
  02  SECURITY-CODE         TYPE UINT32.
  02  FILE-CODE             TYPE UINT16.
  02  FILE-FORMAT           TYPE UINT16.
  02  MAX-EXTENTS           TYPE UINT16.
  02  ALLOC-EXTENTS         TYPE UINT16.
  02  OWNER                 TYPE UINT16.
  02  FILE-TYPE             TYPE UINT16.
  02  REC-LENGTH            TYPE UINT32.
  02  KEY-OFFSET            TYPE UINT32.
  02  KEY-LEN               TYPE UINT16.
  02  ALT-KEY-COUNT         TYPE UINT16.
  02  ALT-FILE-COUNT        TYPE UINT16.
* @LightWaveAttribute(dependsOn="alt-key-count")
  02  ALT-KEYS              TYPE ALT-KEY OCCURS MAX-ALT-KEYS TIMES.
* @LightWaveAttribute(dependsOn="alt-file-count")
  02  ALT-FILES             PIC X(64) OCCURS MAX-ALT-KEYS TIMES.
END.

DEF GET-FILE-INFO-RESULT.
  02 RESULT-CODE    TYPE *.
  02 NODE           TYPE ITEM-NAME.
  02 VOLUME         TYPE ITEM-NAME.
  02 SUBVOL         TYPE ITEM-NAME.
  02 FILENAME       TYPE ITEM-NAME.
  02 FILE-INFO      TYPE *.
END.

DEF GET-SYSTEM-INFO.
  02 REQUEST-CODE   TYPE * VALUE REQUEST-GET-SYSTEM-INFO.
END.

DEF SYSTEM-INFO.
  02 NODE-NUMBER    TYPE INT32.
  02 SYSTEM-SUBVOL  PIC X(16).
  02 RVU            PIC X(16).
END.

DEF GET-SYSTEM-INFO-RESULT.
  02 RESULT-CODE    TYPE *.
  02 NODE           TYPE ITEM-NAME.
  02 SYSTEM-INFO       TYPE *.
END.

DEF GET-CPU-LIST.
  02 REQUEST-CODE   TYPE * VALUE REQUEST-GET-CPU-LIST.
  02 NODE           TYPE ITEM-NAME.
END.

DEF CPU.
  02 CPU-NUMBER     TYPE UINT16.
  02 NAME           PIC X(16).
  02 BUSY           TYPE UINT16.
END.

DEF CPU-LIST.
  02 CPU-COUNT      TYPE UINT16.
  02 CPU            TYPE * OCCURS 1 TO 16 TIMES DEPENDING ON CPU-COUNT.
END.

DEF GET-CPU-LIST-RESULT.
  02 RESULT-CODE    TYPE *.
  02 NODE           TYPE ITEM-NAME.
  02 CPU-LIST       TYPE *.
END.


CONSTANT MAX-CPUS   VALUE 16.

DEF GET-CPU-INFO.
  02 REQUEST-CODE   TYPE * VALUE REQUEST-GET-CPU-INFO.
END.

DEF CPU-INFO.
  05 CPU-COUNT      TYPE BINARY 16.
  05 INFO           OCCURS 1 TO MAX-CPUS TIMES DEPENDING ON CPU-COUNT.
    10 CPU-ID       TYPE BINARY 16.
    10 STATE        TYPE BINARY 16.
    10 NAME         PIC X(16).
END.

DEF GET-CPU-INFO-REPLY.
  05 REPLY-CODE     TYPE BINARY 16.
  05 RESPONSE       TYPE CPU-INFO.
END.

DEF GET-CPU-BUSY.
  02 REQUEST-CODE   TYPE * VALUE REQUEST-GET-CPU-BUSY.
END.

DEF CPU-BUSY.
  05 TIMESTAMP      TYPE BINARY 64.
  05 CPU-COUNT      TYPE BINARY 16. 
  05 BUSY           TYPE BINARY 16 OCCURS 1 TO MAX-CPUS TIMES DEPENDING ON CPU-COUNT.
END.

DEF GET-CPU-BUSY-REPLY.
  05 REPLY-CODE     TYPE BINARY 16.
  05 RESPONSE       TYPE CPU-BUSY.
END.



DEF ERROR-RESULT.
  02 RESULT-CODE    TYPE *.
  02 DESCRIPTION    PIC X(256).
END.
